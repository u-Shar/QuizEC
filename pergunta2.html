<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Temporizador com Cadeado</title>
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/pergunta.css">
</head>
<body>
    <button id="btnPausar">Pausar Música</button>

    <div id="boxPergunta" class="row">
        <div id="enunciado" class="col-6">
            <p id="pNumeroPergunta"><span id='numPergunta'>#2</span> Pergunta 2 - ODS 7</p>

            <p>A logística reversa é um dos principais instrumentos da Política Nacional de Resíduos Sólidos (PNRS), instituída pela Lei nº 12.305/2010. Ela prevê que fabricantes, importadores, distribuidores e comerciantes sejam responsáveis pelo ciclo de vida dos produtos, garantindo sua reinserção na cadeia produtiva, quando possível.</p>

            <p>Em centros urbanos, a coleta seletiva é uma das práticas mais visíveis desse processo, utilizando códigos de cores para diferentes tipos de resíduos. A compreensão correta dessas cores facilita o reaproveitamento de materiais e diminui o impacto ambiental.</p>

            <p> Considerando essa política, qual é a cor associada ao tipo de resíduo que corresponde ao maior volume de embalagens descartadas no Brasil, e que pode ser transformado em brinquedos, roupas e até móveis?</p>

        </div>
        <div id="alternativas" class="col-6">
           
        </div>
    </div>
    
    
    <audio id="backgroundAudio" loop>
		<source src="./assets/musicaDeFundo.mp3" type="audio/mpeg">
		Your browser does not support the audio element.
	</audio>
	<audio id="respostaCerta">
		<source src="./assets/resposta-certa.mp3" type="audio/mpeg">
		Your browser does not support the audio element.
	</audio>
	<audio id="respostaErrada">
		<source src="./assets/resposta-errada.mp3" type="audio/mpeg">
		Your browser does not support the audio element.
	</audio>


    <script src="./js/jquery-3.7.1.min.js"></script>
    <script src="./js/bootstrap.bundle.min.js"></script>
    <script src="./js/sweetalert2@11.js"></script>
    <script>
        $(document).ready(function () {
            
            Swal.fire({
                title: "Vamos começar!",
                showConfirmButton: true,
                confirmButtonText: 'Ok',
                background: "#fff url(./assets/background-papiro.png)",
                color: "#000",
                didOpen: () =>{
                    $("body").removeClass('swal2-height-auto');
                },
            }).then(() => {
                playBackgroundAudio();
            });

            const backgroundAudio = document.getElementById('backgroundAudio');
            const respostaCerta = document.getElementById('respostaCerta');
            const respostaErrada = document.getElementById('respostaErrada');
        
            let comMusica = 0;
            function playBackgroundAudio() {
                backgroundAudio.play();
                comMusica = 1;

                $("#btnPausar").html("Pausar Música");
            }

            function stopBackgroundAudio() {
                backgroundAudio.pause();
                comMusica = 0;

                $("#btnPausar").html("Tocar Música");

            }

            $("#btnPausar").on("click", function(){
                if(comMusica == 0){
                    playBackgroundAudio();
                }else{
                    stopBackgroundAudio();
                }
            });

            embaralhaPerguntas();
            function embaralhaPerguntas(){
                const alternativas = [
                    { classe: 'a1', texto: 'Azul – destinado ao papel e papelão' },
                    { classe: 'a2', texto: 'Verde – destinado ao vidro' },
                    { classe: 'a3', texto: 'Vermelho – destinado ao plástico' },
                    { classe: 'a4', texto: 'Marrom – destinado a resíduos orgânicos' },
                    { classe: 'a5', texto: 'Cinza – destinado ao lixo eletrônico' },
                ];

                // Embaralha a ordem das alternativas
                const embaralhadas = [...alternativas].sort(() => Math.random() - 0.5);

                // Letras a serem atribuídas após embaralhamento
                const letras = ['A', 'B', 'C', 'D', 'E'];

                // Cria os botões com letra conforme a ordem atual
                const botoes = embaralhadas.map((alt, index) => `
                    <button class="btn btn-outline-light ${alt.classe}">
                        <span class="badge text-bg-light">${letras[index]}</span> ${alt.texto}
                    </button>
                `);

                // Insere os botões na div
                $('#alternativas').html(botoes.join(''));

                $("#alternativas button").on("click", function(e){
                    e.preventDefault();

                    if($(this).hasClass("a3")){
                        stopBackgroundAudio();

                        respostaCerta.play();  

                        Swal.fire({
                            imageUrl: "./assets/icon-check.png",
                            imageHeight: 100,
                            title: "Você acertou!",
                            html: `
                                <p>Parabéns, você acertou! O segundo número do código é: <br><strong style="font-size:60px">7</strong></p>
                                <p>Dirija-se ao próximo computador para receber o próximo número</p>
                            `,
                            background: "#fff url(./assets/background-papiro.png)",
                            color: "#000",
                            didOpen: () =>{
                                $("body").removeClass('swal2-height-auto');
                            }
                        }).then((result) => {
                            embaralhaPerguntas();
                            playBackgroundAudio();
                        });
                    }else{
                        stopBackgroundAudio();

                        respostaErrada.currentTime = 0;
                        respostaErrada.play();

                        Swal.fire({
                            imageUrl: "./assets/icon-x.png",
                            imageHeight: 100,
                            title: "Ops... Você errou!",
                            html: `
                                <p>Essa não é a resposta correta! Você pode tentar novamente e/ou visualizar a dica!</p>
                            `,
                            didOpen: () =>{
                                $("body").removeClass('swal2-height-auto');
                            },
                            showCancelButton: true,
                            cancelButtonText: "Ver dica",
                            confirmButtonText: "Tentar novamente",
                            confirmButtonColor: "#02d569",
                            reverseButtons: true,
                            allowOutsideClick: false,
                            allowEscapeKey: false,
                            background: "#fff url(./assets/background-papiro.png)",
                            color: "#000",
                        }).then((result) => {
                            if(result.isConfirmed){
                                respostaErrada.pause();  
                                embaralhaPerguntas();
                                playBackgroundAudio();
                            }else{
                                Swal.fire({
                                    imageUrl: "./assets/dica.png",
                                    imageHeight: 100,
                                    title: "Dica Verde!",
                                    html: `
                                        <p>Esse resíduo é leve, flexível e está em quase tudo que você compra. No entanto, se jogado no lugar errado, dura séculos no planeta. Descubra a cor que guia sua transformação.</p>
                                    `,
                                    didOpen: () =>{
                                        $("body").removeClass('swal2-height-auto');
                                    },
                                    showCancelButton: false,
                                    confirmButtonText: "Tentar novamente",
                                    confirmButtonColor: "#01572A",
                                    allowOutsideClick: false,
                                    allowEscapeKey: false,
                                    background: "#02d569",
                                    color: "#000",
                                }).then((result) => {
                                    embaralhaPerguntas();
                                    playBackgroundAudio();
                                })
                            }
                        })
                    }
                })
            }
        });
    </script>
</body>
</html>